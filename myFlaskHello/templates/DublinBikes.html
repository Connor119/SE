<!DOCTYPE html>
<html>
    <head>
        <title>Dublin Bike</title>
        <!-- <link rel="stylesheet" type="text/css" href="style.css" /> -->
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <!-- <script src="DublinBikes.js"></script> -->

        <style>
            #map{
                height: 100%;
            }

            html, body {
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
            var map;
            function initMap(){
                fetch("/stations").then(response => {
                    return response.json();
                }).then(data => {
                    console.log("data: ", data);
                    map = new google.maps.Map(document.getElementById("map"), {
                        center: {lat: 53.3496, lng: -6.2782},
                        zoom: 13,
                    })

                    data.forEach(station => {
                        console.log('station', station);
                        new google.maps.Marker({
                            position: { lat:station.position_lat, lng:station.position_lng} ,
                            map,
                            title: station.name,
                        });
                    });
                    
                }).catch(err => {
                    console.log("OOPS!", err);
                })
            }



                // map = new google.maps.Map(document.getElementById('map'),{
                //     center: {lat: 53.3496, lng: -6.2782},
                //     zoom: 8
                // })
            
//   });
//             }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCgOkQalKrSnNl6j7mYs8SrvqaL2PuEC2c&callback=initMap"
        async defer></script>
    </body>
</html>